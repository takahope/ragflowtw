<!-- Generated by SpecStory -->

# 項目進展跟蹤與紀錄 (2025-04-23 09:51:56)

_**User**_

/Generate Cursor Rules 跟蹤項目整體進展, 紀錄已完成功能, 正在進行的工作, 已知問題和未來計畫

---

_**Assistant**_

Read file: README.md

---

<details>
            <summary>Searched codebase "current project roadmap status" • **0** results</summary>
        
No results found
</details>

---

Could not find file '.github/ROADMAP.md' in the workspace.

---

<details>
            <summary>Listed directory .github • **3** results</summary>
        
| Name |
|-------|
| 📁 `workflows` |
| 📁 `ISSUE_TEMPLATE` |
| 📄 `pull_request_template.md` |

</details>

---

<details>
            <summary>Grep search for "roadmap" • **7** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_pt_br.md` | L36 | `<a href="https://github.com/infiniflow/ragflow/issues/4214">Roadmap</a> |` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_pt_br.md` | L56 | `- 📜 [Roadmap](#-roadmap)` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_pt_br.md` | L347 | `## 📜 Roadmap` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_pt_br.md` | L349 | `Veja o [RAGFlow Roadmap 2025](https://github.com/infiniflow/ragflow/issues/4214)` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_tzh.md` | L35 | `<a href="https://github.com/infiniflow/ragflow/issues/4214">Roadmap</a> |` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_tzh.md` | L338 | `詳見 [RAGFlow Roadmap 2025](https://github.com/infiniflow/ragflow/issues/4214) 。` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_zh.md` | L36 | `<a href="https://github.com/infiniflow/ragflow/issues/4214">Roadmap</a> |` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_zh.md` | L341 | `详见 [RAGFlow Roadmap 2025](https://github.com/infiniflow/ragflow/issues/4214) 。` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_ko.md` | L36 | `<a href="https://github.com/infiniflow/ragflow/issues/4214">Roadmap</a> |` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_ja.md` | L36 | `<a href="https://github.com/infiniflow/ragflow/issues/4214">Roadmap</a> |` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_id.md` | L326 | `## 📜 Roadmap` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README_id.md` | L328 | `Lihat [Roadmap RAGFlow 2025](https://github.com/infiniflow/ragflow/issues/4214)` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README.md` | L36 | `<a href="https://github.com/infiniflow/ragflow/issues/4214">Roadmap</a> |` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README.md` | L56 | `- 📜 [Roadmap](#-roadmap)` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README.md` | L360 | `## 📜 Roadmap` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README.md` | L362 | `See the [RAGFlow Roadmap 2025](https://github.com/infiniflow/ragflow/issues/4214)` |

</details>

---

<details>
            <summary>Grep search for "Latest Updates" • **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README.md` | L47 | `- 📌 [Latest Updates](#-latest-updates)` |
| `file:///c%3A/Users/kolin/OneDrive/%E6%96%87%E4%BB%B6/ragflow/README.md` | L78 | `## 🔥 Latest Updates` |

</details>

---

Read file: README.md

---

<details>
            <summary>Searched web "ragflow roadmap 2025 github issue 4214" • **6** results</summary>
        
| Title | URL |
|-------|-----|
| ROADMAP 2025 · Issue #4214 · infiniflow/ragflow | https://github.com/infiniflow/ragflow/issues/4214 |
| Issues · infiniflow/ragflow | https://github.com/infiniflow/ragflow/issues |
| Supports light version of GraphRAG(without community) | https://github.com/infiniflow/ragflow/issues/4543 |
| ragflow/deepdoc/README.md at main · infiniflow/ragflow | https://github.com/infiniflow/ragflow/blob/main/deepdoc/README.md |
| Roadmap  • flow-php | https://github.com/orgs/flow-php/projects/1 |
| Use R2R for RAG backend · Issue #1332 · open-webui/open-webui | https://github.com/open-webui/open-webui/issues/1332 |

</details>

---

```diff
- 
+ # RAGFlow項目狀態追蹤
+ 
+ RAGFlow是一個基於深度文檔理解的開源RAG（檢索增強生成）引擎。本文檔跟蹤項目的整體進展，以幫助團隊成員了解項目狀態。
+ 
+ ## 已完成功能
+ 
+ ### 最近更新 (v0.17.2及以前)
+ - **2025-03-19**: 支持使用多模態模型解析PDF或DOCX文件中的圖像
+ - **2025-02-28**: 結合互聯網搜索(Tavily)，支持類似Deep Research的推理能力
+ - **2025-01-26**: 優化知識圖譜提取和應用，提供多種配置選項
+ - **2024-12-18**: 升級DeepDoc中的文檔佈局分析模型
+ - **2024-11-01**: 為解析的文本塊添加關鍵字提取和相關問題生成，提高檢索準確性
+ - **2024-08-22**: 通過RAG支持文本到SQL語句的轉換
+ 
+ ### 核心功能
+ - **深度文檔理解**：從非結構化數據中提取知識
+ - **基於模板的分塊處理**：智能且可解釋的文本分塊
+ - **有根據的引用**：減少幻覺
+ - **異構數據源兼容**：支持Word、幻燈片、Excel、文本、圖片等多種格式
+ - **自動化RAG工作流程**：便於個人和企業使用
+ 
+ ## 正在進行的工作
+ 
+ ### v0.19.0 (計劃中)
+ - 實現Model Context Protocol (MCP)服務
+ - 優化答案中的引用功能
+ - 團隊成員共享Agent功能
+ - Agent版本歷史支持
+ - 支持中斷流式輸出
+ - 為聊天助手和Agent提供OpenAI兼容API
+ - 支持禁用用戶註冊
+ - 通過VLM(視覺語言模型)解析PDF/Docx中的圖表
+ 
+ ### 技術改進
+ - GraphRAG重構：支持輕量版GraphRAG (無社區檢測)
+ - 改進知識圖顯示功能
+ - 為AssistantSetting添加關鍵字項
+ 
+ ## 已知問題
+ 
+ 以下是已知的問題和限制：
+ 
+ - 用戶管理功能有限，目前沒有管理員入口
+ - 公開部署時，任何人都可以註冊使用
+ - ARM64平台支持有限
+ - 文檔語言解析設置需要改進
+ 
+ ## 未來計畫
+ 
+ 根據[RAGFlow Roadmap 2025](https://github.com/infiniflow/ragflow/issues/4214)，以下是計劃中的功能：
+ 
+ ### 短期計畫
+ - 改進Agent提示參考表單
+ - 支持用戶註冊切換功能
+ - 多模態RAG支持
+ - 支持Agent工作流導出和導入
+ - 移動端UI優化
+ 
+ ### 長期計畫
+ - 完善RAGFlow文檔，包括指南、參考、最佳實踐等
+ - 增強API功能
+ - 為Agent支持記憶API
+ - 增加管理員界面
+ - 支持PostgreSQL數據庫
+ 
+ ## 已廢棄/移除的功能
+ 
+ - 移除與百度和百度翻譯相關的Agent組件
+ 
```

---

```diff
- 
+ # RAGFlow架構概述
+ 
+ RAGFlow是一個基於深度文檔理解的開源RAG(檢索增強生成)引擎。本文檔描述了RAGFlow的系統架構、主要組件和工作流程。
+ 
+ ## 系統架構
+ 
+ RAGFlow採用微服務架構，主要包含以下服務：
+ 
+ - **ragflow**: 主服務容器，運行RAGFlow的核心功能
+ - **es01**: Elasticsearch服務，用於文本搜索和索引
+ - **infinity**: Infinity數據庫服務，提供向量和圖數據存儲
+ - **mysql**: MySQL數據庫，用於存儲系統配置和元數據
+ - **minio**: MinIO對象存儲，用於存儲文檔和檔案
+ - **redis**: Redis緩存服務
+ 
+ ### 架構圖
+ 
+ ```
+ +-------------+    +---------------+    +---------------+
+ |             |    |               |    |               |
+ |   Web UI    |--->|  RAGFlow API  |--->| Agent/Flow    |
+ |             |    |               |    |               |
+ +-------------+    +---------------+    +---------------+
+                           |                    |
+                           v                    v
+ +-------------+    +---------------+    +---------------+
+ |             |    |               |    |               |
+ |   MySQL     |<---|  DeepDoc      |<---| RAG Core      |
+ |             |    |               |    |               |
+ +-------------+    +---------------+    +---------------+
+                           |                    |
+                           v                    v
+                    +---------------+    +---------------+
+                    |               |    |               |
+                    | MinIO/Storage |    | ES/Infinity   |
+                    |               |    |               |
+                    +---------------+    +---------------+
+ ```
+ 
+ ## 主要組件
+ 
+ ### 1. [deepdoc/](mdc:deepdoc/) - 深度文檔處理
+ 
+ 用於從複雜格式的文檔中提取結構化和非結構化數據。支持功能：
+ 
+ - OCR文本識別
+ - 佈局分析
+ - 表格結構識別(TSR)
+ - 多種文檔格式解析(PDF, DOCX, EXCEL, PPT)
+ 
+ ### 2. [rag/](mdc:rag/) - RAG核心功能
+ 
+ 提供RAG(檢索增強生成)的核心實現：
+ 
+ - 基於模板的分塊處理
+ - 多種檢索方法
+ - 融合重排序
+ - 知識圖譜生成和應用
+ 
+ ### 3. [web/](mdc:web/) - 前端界面
+ 
+ 提供用戶友好的Web界面，支持：
+ 
+ - 知識庫管理
+ - 對話聊天
+ - Agent設計和使用
+ - 用戶管理
+ 
+ ### 4. [agent/](mdc:agent/) - 代理組件
+ 
+ 提供可編排的工作流組件：
+ 
+ - 檢索
+ - 生成
+ - 搜索
+ - 翻譯
+ - 集成第三方服務
+ 
+ ### 5. [api/](mdc:api/) - API服務
+ 
+ 提供RESTful API，用於：
+ 
+ - 文檔處理
+ - 知識庫管理
+ - 對話和聊天
+ - Agent操作
+ 
+ ## 工作流程
+ 
+ 1. **文檔處理流程**：
+    - 文檔上傳 → DeepDoc處理 → 文本提取 → 分塊處理 → 嵌入生成 → 索引存儲
+ 
+ 2. **檢索流程**：
+    - 用戶查詢 → 查詢理解 → 向量檢索 → 重排序 → 結果過濾 → 返回上下文
+ 
+ 3. **生成流程**：
+    - 上下文 + 提示詞 → LLM生成 → 引用處理 → 返回答案
+ 
+ 4. **Agent工作流**：
+    - 定義流程 → 節點配置 → 節點關聯 → 流程執行 → 結果處理
+ 
+ ## 部署架構
+ 
+ RAGFlow使用Docker容器進行部署，通過docker-compose配置多個服務組件：
+ 
+ - [docker-compose.yml](mdc:docker/docker-compose.yml) - 主要的服務編排文件
+ - [docker-compose-base.yml](mdc:docker/docker-compose-base.yml) - 基礎服務配置
+ - [service_conf.yaml.template](mdc:docker/service_conf.yaml.template) - 服務配置模板
+ 
+ ## 配置選項
+ 
+ 系統通過以下文件進行配置：
+ 
+ - [.env](mdc:docker/.env) - 環境變量配置，如服務端口、密碼等
+ - [service_conf.yaml.template](mdc:docker/service_conf.yaml.template) - 後端服務配置，如LLM設置、數據庫連接等
+ 
```

---

```diff
- 
+ # RAGFlow部署指南
+ 
+ 本文檔提供RAGFlow的詳細部署指南，包括安裝步驟、配置選項和常見問題解決方案。
+ 
+ ## 系統要求
+ 
+ 在部署RAGFlow前，請確保您的系統滿足以下要求：
+ 
+ - CPU >= 4核
+ - RAM >= 16 GB
+ - 硬盤 >= 50 GB
+ - Docker >= 24.0.0 & Docker Compose >= v2.26.1
+ 
+ ## 安裝步驟
+ 
+ ### 1. 系統設置
+ 
+ 確保`vm.max_map_count`設置為至少262144：
+ 
+ ```bash
+ # 檢查當前值
+ $ sysctl vm.max_map_count
+ 
+ # 如果值小於262144，請設置為262144
+ $ sudo sysctl -w vm.max_map_count=262144
+ 
+ # 要永久設置此值，請編輯/etc/sysctl.conf文件並添加
+ vm.max_map_count=262144
+ ```
+ 
+ ### 2. 獲取代碼
+ 
+ ```bash
+ $ git clone https://github.com/infiniflow/ragflow.git
+ $ cd ragflow
+ ```
+ 
+ ### 3. 啟動服務
+ 
+ RAGFlow提供了不同的鏡像版本，可根據需要選擇：
+ 
+ | RAGFlow鏡像標籤 | 鏡像大小 (GB) | 包含嵌入模型？ | 穩定性                 |
+ |--------------|------------|--------------|-----------------------|
+ | v0.17.2      | 約9         | ✓            | 穩定發布                |
+ | v0.17.2-slim | 約2         | ✗            | 穩定發布                |
+ | nightly      | 約9         | ✓            | 不穩定的每日構建版本       |
+ | nightly-slim | 約2         | ✗            | 不穩定的每日構建版本       |
+ 
+ ```bash
+ $ cd docker
+ 
+ # 使用CPU運行嵌入和DeepDoc任務
+ $ docker compose -f docker-compose.yml up -d
+ 
+ # 或使用GPU加速嵌入和DeepDoc任務
+ # $ docker compose -f docker-compose-gpu.yml up -d
+ ```
+ 
+ ### 4. 驗證服務啟動
+ 
+ ```bash
+ $ docker logs -f ragflow-server
+ ```
+ 
+ 當看到以下輸出時，表示系統成功啟動：
+ 
+ ```
+      ____   ___    ______ ______ __
+     / __ \ /   |  / ____// ____// /____  _      __
+    / /_/ // /| | / / __ / /_   / // __ \| | /| / /
+   / _, _// ___ |/ /_/ // __/  / // /_/ /| |/ |/ /
+  /_/ |_|/_/  |_|\____//_/    /_/ \____/ |__/|__/
+ 
+ * Running on all addresses (0.0.0.0)
+ ```
+ 
+ ### 5. 訪問系統
+ 
+ 在瀏覽器中輸入您服務器的IP地址即可訪問RAGFlow。
+ 
+ ### 6. 配置LLM
+ 
+ 編輯[service_conf.yaml.template](mdc:docker/service_conf.yaml.template)文件，選擇所需的LLM工廠並更新相應的API密鑰。
+ 
+ ## 配置選項
+ 
+ ### 基本配置文件
+ 
+ RAGFlow的配置主要通過以下文件管理：
+ 
+ - [.env](mdc:docker/.env)：系統的基本設置，如HTTP端口、MySQL密碼和MinIO密碼
+ - [service_conf.yaml.template](mdc:docker/service_conf.yaml.template)：後端服務配置
+ - [docker-compose.yml](mdc:docker/docker-compose.yml)：系統啟動配置
+ 
+ ### 修改HTTP端口
+ 
+ 要更改默認的HTTP端口(80)，請編輯[docker-compose.yml](mdc:docker/docker-compose.yml)文件，將`80:80`更改為`<您的端口>:80`。
+ 
+ ### 修改LLM設置
+ 
+ 在[service_conf.yaml.template](mdc:docker/service_conf.yaml.template)文件中配置LLM設置，包括：
+ 
+ ```yaml
+ user_default_llm:
+   factory: openai  # 可替換為anthropic、google等
+   api_key: ${OPENAI_API_KEY}
+   model: gpt-4-turbo
+ ```
+ 
+ ### 切換文檔引擎
+ 
+ RAGFlow默認使用Elasticsearch存儲全文和向量。要切換到Infinity：
+ 
+ 1. 停止所有正在運行的容器：
+    ```bash
+    $ docker compose -f docker/docker-compose.yml down -v
+    ```
+    
+    > 警告：`-v`將刪除Docker容器卷，現有數據將被清除。
+    
+ 2. 在**docker/.env**中將`DOC_ENGINE`設置為`infinity`。
+ 
+ 3. 啟動容器：
+    ```bash
+    $ docker compose -f docker-compose.yml up -d
+    ```
+ 
+ ## 構建Docker鏡像
+ 
+ ### 不包含嵌入模型的鏡像
+ 
+ ```bash
+ $ cd docker
+ $ docker build -t infiniflow/ragflow:custom \
+   --build-arg VERSION=custom \
+   --build-arg LIGHTEN=true \
+   --build-arg NEED_MIRROR=false \
+   -f ../Dockerfile ..
+ ```
+ 
+ ### 包含嵌入模型的鏡像
+ 
+ ```bash
+ $ cd docker
+ $ docker build -t infiniflow/ragflow:custom \
+   --build-arg VERSION=custom \
+   --build-arg LIGHTEN=false \
+   --build-arg NEED_MIRROR=false \
+   -f ../Dockerfile ..
+ ```
+ 
+ ## 常見問題
+ 
+ ### 1. 服務啟動失敗
+ 
+ 問題：使用`docker-compose.yml`啟動服務失敗。
+ 
+ 解決方案：
+ - 確保Docker和Docker Compose已正確安裝
+ - 檢查系統是否滿足最低硬件要求
+ - 檢查`vm.max_map_count`設置是否正確
+ - 查看Docker日誌以獲取更多信息：`docker logs -f ragflow-server`
+ 
+ ### 2. GPU支持問題
+ 
+ 問題：使用GPU版本時，服務仍在CPU上運行。
+ 
+ 解決方案：
+ - 確保已安裝NVIDIA驅動和CUDA
+ - 確保已安裝nvidia-docker2
+ - 檢查GPU是否被Docker識別：`docker run --gpus all nvidia/cuda:11.0-base nvidia-smi`
+ 
+ ### 3. 無法連接到服務
+ 
+ 問題：在瀏覽器中無法訪問RAGFlow。
+ 
+ 解決方案：
+ - 確保防火牆允許HTTP端口(默認80)流量
+ - 使用`docker ps`檢查容器是否正在運行
+ - 確保服務器的IP地址可訪問
+ 
+ ### 4. 模型API鍵問題
+ 
+ 問題：設置LLM API密鑰後仍然出現錯誤。
+ 
+ 解決方案：
+ - 確保API密鑰格式正確
+ - 在service_conf.yaml.template中檢查API密鑰設置
+ - 重啟服務以應用更改：`docker compose -f docker-compose.yml up -d`
+ 
+ ## 從源代碼運行（開發用途）
+ 
+ 對於開發目的，可以從源代碼啟動服務：
+ 
+ ```bash
+ # 啟動數據庫服務
+ $ cd docker
+ $ docker compose -f docker-compose-dev.yml up -d
+ 
+ # 啟動後端服務
+ $ cd ..
+ $ python -m api.apps.ragflow
+ 
+ # 啟動前端服務
+ $ cd web
+ $ npm install
+ $ npm run dev
+ ```
+ 
```

---

已創建三個Cursor規則文件，用於追蹤RAGFlow項目的進展、架構和部署指南：

1. 第一個規則文件 `.cursor/rules/ragflow-project-status.mdc` 跟蹤項目整體進展，記錄已完成功能、正在進行的工作、已知問題和未來計畫。

2. 第二個規則文件 `.cursor/rules/ragflow-architecture.mdc` 描述了RAGFlow的系統架構、主要組件和工作流程。

3. 第三個規則文件 `.cursor/rules/ragflow-deployment-guide.mdc` 提供了詳細的部署指南，包括安裝步驟、配置選項和常見問題解決方案。

這些規則文件將幫助開發團隊更好地了解和管理RAGFlow項目，並為新成員提供快速上手的參考。

---



---

